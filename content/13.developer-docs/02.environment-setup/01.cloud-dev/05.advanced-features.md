---
title: "Advanced Features"
description: "Auto-stop, database provisioning, notifications, and more."
---

# Advanced Features

Cloud-dev includes several advanced features to improve automation, reduce costs, and streamline the developer experience.

## Auto-Stop (Cost Savings)

Instances automatically stop after a period of idle time to save costs.

### How It Works

- A Lambda function runs every hour
- Checks if CPU utilization has been below 5% for N hours
- If idle, the instance is automatically stopped
- Data is preserved - just start it again when needed

### Configuration

By default, auto-stop is set to **4 hours**. You can customize this during creation:

```bash
# Default: stop after 4 hours idle
./ds cloud-dev create

# Disable auto-stop
./ds cloud-dev create --auto-stop 0

# Stop after 8 hours idle
./ds cloud-dev create --auto-stop 8

# Stop after 2 hours idle
./ds cloud-dev create --auto-stop 2
```

### Cost Impact

| Scenario | Monthly Cost |
|----------|-------------|
| Always running | ~$122/month |
| Auto-stop after 4 hours (typical use) | ~$30-50/month |
| Stopped when not working | ~$8/month |

::callout{type="tip"}
Auto-stop is perfect for developers who sometimes forget to stop their instance. Your data is always preserved.
::

---

## Neon Database Auto-Provisioning

If configured by an admin, cloud-dev can automatically create a Neon database branch for each developer.

### Using Auto-Provisioning

```bash
./ds cloud-dev create --auto-provision-db
```

This will:
1. Check if a branch named `dev-yourname` already exists
2. Create the branch if it doesn't exist
3. Generate a connection string automatically
4. Configure your `.env` with the new connection

### Interactive Branch Selection

If the Neon API is configured, you'll see available branches during setup:

```
Available Neon branches:
──────────────────────────────────────────────────
- main                           (ready)
- dev-alice                      (ready)
- dev-bob                        (ready)
──────────────────────────────────────────────────

? Select database option:
❯ Auto-provision new branch (dev-yourname)
  Enter connection string manually
  Use existing: dev-alice
```

### Benefits

- **No manual branch creation** - Database is ready automatically
- **Isolated data** - Each developer has their own branch
- **Easy cleanup** - Branches can be deleted independently

::callout{type="info"}
Auto-provisioning requires Neon API credentials to be configured in AWS Secrets Manager. See the [Admin Guide](/developer-docs/environment-setup/cloud-dev/admin-guide) for setup.
::

---

## Slack Notifications

Cloud-dev can send Slack notifications when environments are created or destroyed.

### What Gets Notified

| Event | Notification |
|-------|-------------|
| Environment created | Developer name, instance name, IP, region |
| Environment destroyed | Developer name, instance name |
| Setup error | Developer name, error details |

### Example Notification

```
Cloud Dev Environment Created
─────────────────────────────
Developer: alice
Instance: devstride-dev-alice
Region: us-east-1
IP Address: 54.123.45.67

Connect: ssh devstride-alice
```

### Benefits

- **Team visibility** - Know when teammates are working
- **Onboarding tracking** - See when new developers set up
- **Issue awareness** - Get notified of setup failures

::callout{type="info"}
Slack notifications require a webhook URL to be configured by an admin. See the [Admin Guide](/developer-docs/environment-setup/cloud-dev/admin-guide).
::

---

## Secrets Validation

During `create`, cloud-dev validates that all required secrets are present before configuring your environment.

### What Gets Validated

The following secrets are checked:

| Category | Secrets |
|----------|---------|
| Core | `DOMAIN` |
| Pusher | `PUSHER_APP_KEY`, `PUSHER_APP_SECRET`, `PUSHER_APP_ID`, `PUSHER_APP_CLUSTER` |
| Stripe | `STRIPE_PUBLIC_KEY`, `STRIPE_SECRET_KEY` |
| GitHub | `GITHUB_APP_ID`, `GITHUB_CLIENT_ID`, `GITHUB_CLIENT_SECRET`, `GITHUB_APP_CERT`, `GITHUB_APP_NAME` |
| AI | `OPENAI_API_KEY` |
| Media | `GIPHY_API_KEY` |

### Validation Output

```
Phase 7: Configuring environment...
   All 14 required secrets present.
   Optional (not configured): CUBE_API_ENDPOINT, SLACK_CLIENT_ID
```

If secrets are missing:

```
WARNING: Some required secrets are missing or have placeholder values:
   Missing: OPENAI_API_KEY
   Placeholders: STRIPE_SECRET_KEY
   The backend may not function correctly until these are configured.
   Ask an admin to run: ds cloud-dev init-secrets -i .env
```

---

## VS Code Tunnel

VS Code CLI is pre-installed on cloud instances for remote tunnel support.

### Setting Up a Tunnel

1. SSH into your instance:
   ```bash
   ssh devstride-yourname
   ```

2. Start the tunnel:
   ```bash
   code tunnel --name devstride-yourname
   ```

3. Follow the authentication prompts

4. Connect from your local VS Code using the Remote Tunnels extension

### Benefits

- **No port forwarding needed** - Works through NAT/firewalls
- **Persistent connection** - Reconnects automatically
- **Full VS Code experience** - All extensions work normally

---

## Health Checks

The `verify` command runs comprehensive health checks on your environment.

### What Gets Checked

| Check | Description |
|-------|-------------|
| SSH Access | Can connect to instance via SSH |
| GitHub SSH | SSH key is recognized by GitHub |
| AWS Credentials | Valid credentials on instance |
| Database | Connection to Neon works |
| Repository | Git repo exists at ~/dev/devstride |
| Node.js | Correct version installed |
| Environment | `.env` file exists and has content |

### Running Health Checks

```bash
./ds cloud-dev verify
```

**Example output:**

```
Health Check Results:
──────────────────────────────────────────────────
✓ SSH Access        Connected to ec2-user@54.123.45.67
✓ GitHub SSH        Authenticated as yourname
✓ AWS Credentials   Valid
✓ Database          Connected successfully
✓ Repository        ~/dev/devstride
✓ Node.js           v20.10.0
✓ Environment       35 variables configured
──────────────────────────────────────────────────
All 7/7 checks passed!
```

---

## Multiple Instances

You can create multiple cloud instances for different purposes:

```bash
# Create instances
./ds cloud-dev create               # Primary instance
./ds cloud-dev create -i 2          # Second instance
./ds cloud-dev create -i feature    # Named instance

# Manage specific instances
./ds cloud-dev ssh -i 2
./ds cloud-dev stop -i feature
./ds cloud-dev destroy -i 2
```

### Use Cases

- **Feature isolation** - Test major changes without affecting main work
- **Different branches** - Run different git branches simultaneously
- **Experimentation** - Try something risky without risking main setup

---

## Next Steps

- [Admin Guide](/developer-docs/environment-setup/cloud-dev/admin-guide) - Configure Neon, Slack, and secrets
- [Troubleshooting](/developer-docs/environment-setup/cloud-dev/troubleshooting) - Common issues
- [Command Reference](/developer-docs/environment-setup/cloud-dev/commands) - All commands
