---
title: "Command Reference"
description: "Complete reference for all cloud-dev CLI commands."
---

# Cloud Dev Command Reference

All commands are run from the DevStride repository root:

```bash
./ds cloud-dev <command> [options]
```

## Getting Started

| Command | Description |
|---------|-------------|
| `init` | Configure local environment (run this first!) |
| `create` | Create and fully configure a cloud dev environment |

### `init`

Configure your local environment for cloud-dev. Run this once before using other commands.

```bash
./ds cloud-dev init
```

**What it does:**
- Sets `DEVSTRIDE_STAGE` (your developer name)
- Sets `AWS_PROFILE` (your AWS SSO profile)
- Updates your shell configuration

**Example:**
```bash
./ds cloud-dev init  # Configure environment
```

---

### `create`

Deploy a new cloud development environment. This is the main command for getting started.

```bash
./ds cloud-dev create [options]
```

**Options:**
| Option | Description |
|--------|-------------|
| `--skip-setup` | Deploy infrastructure only (skip auto-setup) |
| `--custom-db` | Prompt for custom database (default: use shared dev DB) |
| `--auto-provision-db` | Auto-create a Neon database branch for you |
| `--start-backend` | Start backend in tmux session after setup |
| `--skip-migrations` | Skip running database migrations |
| `--auto-stop <auto-stop>` | Hours of idle before auto-stop (default: 4, set to 0 to disable) |

**What it does:**
- Runs pre-flight checks (Node.js, pnpm, AWS CLI, Git, etc.)
- Deploys EC2 instance via SST (with auto-stop scheduler)
- Waits for instance initialization
- Configures SSH keys and local config
- Adds GitHub SSH key automatically (via `gh` CLI)
- Verifies GitHub SSH access works
- Clones repository and runs `pnpm install`
- Validates all required secrets are present
- Creates `.env` with shared secrets (auto-provisions Neon branch if requested)
- Runs database migrations and verifies connection
- Optionally starts backend in tmux
- Sends Slack notification (if configured)

**Example:**
```bash
./ds cloud-dev create  # Standard create (4-hour auto-stop)
./ds cloud-dev create --start-backend  # Start backend after setup
./ds cloud-dev create --auto-provision-db  # Auto-create Neon database branch
./ds cloud-dev create --custom-db  # Prompt for your own database
./ds cloud-dev create --auto-stop 0  # Disable auto-stop
./ds cloud-dev create --auto-stop 8  # Stop after 8 hours idle
./ds cloud-dev create -i 2  # Create second instance
./ds cloud-dev create --skip-setup  # Infrastructure only
```

::callout{type="tip"}
**Auto-stop saves money!** By default, your instance automatically stops after 4 hours of idle time (CPU < 5%). Use `--auto-stop 0` to disable if needed.
::

---

## Instance Management

| Command | Description |
|---------|-------------|
| `list` | List all your dev instances |
| `start` | Start a stopped instance |
| `stop` | Stop a running instance (preserves data) |
| `info` | Show connection information |
| `destroy` | Remove instance and all AWS resources |
| `cleanup` | Find and remove orphaned cloud resources |
| `verify` | Health check your environment |
| `build-ami` | Build pre-configured AMI (admin only) |

### `list`

List all your dev instances

```bash
./ds cloud-dev list
```

**Example:**
```bash
./ds cloud-dev list  # Show all instances
```

---

### `start`

Start a stopped instance

```bash
./ds cloud-dev start
```

**Example:**
```bash
./ds cloud-dev start  # Start default instance
./ds cloud-dev start -i 2  # Start instance 2
```

---

### `stop`

Stop a running instance (preserves data)

```bash
./ds cloud-dev stop
```

**Example:**
```bash
./ds cloud-dev stop  # Stop default instance
./ds cloud-dev stop -i 2  # Stop instance 2
```

---

### `info`

Show connection information

```bash
./ds cloud-dev info
```

**Example:**
```bash
./ds cloud-dev info  # Show connection details
```

---

### `destroy`

Completely remove a cloud environment. **This deletes all data.**

```bash
./ds cloud-dev destroy
```

**What it does:**
- EC2 instance and EBS volume (**all data lost**)
- VPC and networking resources
- Local SSH keys and config
- Auto-stop Lambda and EventBridge rule

**Example:**
```bash
./ds cloud-dev destroy  # Destroy default instance
./ds cloud-dev destroy -i 2  # Destroy instance 2
./ds cloud-dev destroy -f  # Skip confirmation
```

---

### `cleanup`

Find and remove orphaned cloud resources

```bash
./ds cloud-dev cleanup
```

**Example:**
```bash
./ds cloud-dev cleanup  # Scan for orphaned resources
```

---

### `verify`

Run a health check on your cloud dev environment. Checks instance, SSH, repository, .env, Node.js, dependencies, and backend status.

```bash
./ds cloud-dev verify
```

**Example:**
```bash
./ds cloud-dev verify  # Run all health checks
```

---

### `build-ami`

Build a pre-configured AMI from an existing instance. This creates an image with all dependencies pre-installed for faster instance creation. **Admin use only.**

```bash
./ds cloud-dev build-ami [options]
```

**Options:**
| Option | Description |
|--------|-------------|
| `--ami-name <ami-name>` | Custom name for the AMI (default: `devstride-cloud-dev`) |

**Example:**
```bash
./ds cloud-dev build-ami  # Build from your instance
./ds cloud-dev build-ami --ami-name "custom"  # Custom AMI name
```

::callout{type="warning"}
For best results, stop the instance before building an AMI to ensure consistent state.
::

---

## Connectivity

| Command | Description |
|---------|-------------|
| `ssh` | SSH into your instance |
| `ssm` | Connect via AWS SSM (no SSH key needed) |
| `connect` | SSH with port forwarding for local frontend |
| `code` | Open VS Code Remote SSH to instance |
| `claude` | Run Claude Code on a dev instance |
| `setup` | Configure SSH keys and GitHub access manually |

### `ssh`

Connect to your instance via SSH. If SSH keys aren't configured, you'll be prompted to run setup.

```bash
./ds cloud-dev ssh
```

**Example:**
```bash
./ds cloud-dev ssh  # Connect to default instance
./ds cloud-dev ssh -i 2  # Connect to instance 2
```

---

### `ssm`

Connect via AWS Systems Manager (useful if SSH is blocked).

```bash
./ds cloud-dev ssm
```

**Example:**
```bash
./ds cloud-dev ssm  # Connect via SSM
```

---

### `connect`

SSH with port forwarding for local frontend development. Run your frontend locally while the backend runs on your cloud instance.

```bash
./ds cloud-dev connect [options]
```

**Options:**
| Option | Description |
|--------|-------------|
| `-p, --ports <ports>` | Comma-separated ports (default: `3000,3001,5173`) |

**What it does:**
- Access points after connecting:
- http://localhost:3000
- http://localhost:3001
- http://localhost:5173

**Example:**
```bash
./ds cloud-dev connect  # Forward default ports
./ds cloud-dev connect -p 3000,8080  # Custom ports
```

---

### `code`

Open VS Code with Remote SSH directly to your instance.

```bash
./ds cloud-dev code [options]
```

**Options:**
| Option | Description |
|--------|-------------|
| `-f, --folder <folder>` | Folder to open (default: `~/dev/devstride`) |

**Example:**
```bash
./ds cloud-dev code  # Open devstride folder
./ds cloud-dev code -f ~/dev/other-repo  # Open different folder
```

::callout{type="info"}
Requires VS Code with the "Remote - SSH" extension installed.
::

---

### `claude`

Launch Claude Code directly on your cloud instance. SSHs into your instance and starts Claude Code in the `~/dev/devstride` directory. Claude runs with `--dangerously-skip-permissions` to enable autonomous operation.

```bash
./ds cloud-dev claude
```

**Example:**
```bash
./ds cloud-dev claude  # Start Claude on default instance
./ds cloud-dev claude -i 2  # On instance 2
```

---

### `setup`

Manually set up SSH keys, local SSH config, and GitHub SSH key access.

```bash
./ds cloud-dev setup
```

**Example:**
```bash
./ds cloud-dev setup  # Run manual setup
```

---

## Remote Development

Run commands on your cloud instance from your local terminal.

| Command | Description |
|---------|-------------|
| `start-backend` | Start backend (`./ds run backend`) |
| `stop-backend` | Stop backend process |
| `start-frontend` | Start frontend (`./ds run ui`) |
| `stop-frontend` | Stop frontend process |
| `run-migrations` | Run database migrations |
| `reset-database` | Reset database from source |
| `logs` | Tail backend logs |

### `start-backend`

Start backend (`./ds run backend`)

```bash
./ds cloud-dev start-backend
```

**Example:**
```bash
./ds cloud-dev start-backend  # Start backend remotely
```

---

### `stop-backend`

Stop backend process

```bash
./ds cloud-dev stop-backend
```

**Example:**
```bash
./ds cloud-dev stop-backend  # Stop backend
```

---

### `start-frontend`

Start frontend (`./ds run ui`)

```bash
./ds cloud-dev start-frontend
```

**Example:**
```bash
./ds cloud-dev start-frontend  # Start frontend remotely
```

---

### `stop-frontend`

Stop frontend process

```bash
./ds cloud-dev stop-frontend
```

**Example:**
```bash
./ds cloud-dev stop-frontend  # Stop frontend
```

---

### `run-migrations`

Run database migrations

```bash
./ds cloud-dev run-migrations
```

**Example:**
```bash
./ds cloud-dev run-migrations  # Run migrations
```

---

### `reset-database`

Reset database from source

```bash
./ds cloud-dev reset-database
```

**Example:**
```bash
./ds cloud-dev reset-database  # Reset database
```

---

### `logs`

Tail logs from the backend. If the backend is running in a tmux session, this attaches to it. Otherwise, it tails SST log files.

```bash
./ds cloud-dev logs
```

**What it does:**
- Press `Ctrl+C` to stop tailing.

**Example:**
```bash
./ds cloud-dev logs  # Tail logs
```

---

## Secrets Management

| Command | Description |
|---------|-------------|
| `init-secrets` | Push local `.env` to AWS Secrets Manager (admin) |
| `setup-secrets` | Fetch secrets from AWS to local `.env` file |
| `list-secrets` | List stored secret keys (not values) |

### `init-secrets`

Upload local `.env` to AWS Secrets Manager for team sharing.

```bash
./ds cloud-dev init-secrets
```

**Example:**
```bash
./ds cloud-dev init-secrets  # Push secrets
./ds cloud-dev init-secrets -f  # Force overwrite
```

---

### `setup-secrets`

Download shared secrets to create your `.env` file.

```bash
./ds cloud-dev setup-secrets [options]
```

**Options:**
| Option | Description |
|--------|-------------|
| `-o, --output <output>` | Output file path (default: `.env`) |

**Example:**
```bash
./ds cloud-dev setup-secrets  # Fetch to .env
./ds cloud-dev setup-secrets -o .env.local  # Custom output path
```

---

### `list-secrets`

List stored secret keys (not values)

```bash
./ds cloud-dev list-secrets
```

**Example:**
```bash
./ds cloud-dev list-secrets  # List secret keys
```

---

## Global Options

These options work with most commands:

| Option | Description |
|--------|-------------|
| `-n, --name <name>` | Developer name (defaults to `DEVSTRIDE_STAGE`) |
| `-i, --instance <instance>` | Instance identifier (for multiple instances) |
| `-f, --force` | Skip confirmation prompts |

---

## Interactive Menu

Run without arguments for an interactive menu:

```bash
./ds cloud-dev
```

Or show help:

```bash
./ds cloud-dev help
```

---

<!-- This file is auto-generated. Edit cli/utils/cloud-dev/docs-metadata.ts instead. -->
<!-- Generated: 2026-02-04T21:30:27.228Z -->