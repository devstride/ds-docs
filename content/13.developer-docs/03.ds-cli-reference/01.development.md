---
title: "Development Commands"
description: "Commands for running and developing DevStride locally."
---

# Development Commands

Commands for initializing your environment, running services locally, and generating code.

## init

Interactive setup wizard that walks you through configuring your development environment from scratch.

```bash
./ds init
```

The wizard runs through the following steps:

1. **Prerequisites check** -- verifies Node.js, pnpm, AWS CLI, Pulumi, and git are installed
2. **Check current environment** -- displays any existing `DEVSTRIDE_STAGE` and `AWS_PROFILE` values
3. **Developer name** -- your short, lowercase identifier used as your stage name (e.g., `phil`)
4. **AWS profile** -- configures your SSO profile name (recommended: `devstride-<name>`)
5. **Region** -- selects the AWS region closest to you
6. **Shell configuration** -- writes `DEVSTRIDE_STAGE`, `AWS_PROFILE`, `DEVSTRIDE_DEV_PROFILE`, and `DEVSTRIDE_REGION` to your shell rc file
7. **AWS SSO profile setup** -- configures the named profile in `~/.aws/config`
8. **AWS SSO authentication** -- runs `aws sso login`
9. **Fetch secrets** -- pulls shared secrets from AWS Secrets Manager into `.env`
10. **Neon database provisioning** -- creates a Neon database branch for your stage
11. **Pulumi stack initialization** -- creates and configures a Pulumi stack with your stage name

After init completes, source your shell config to apply the new environment variables:

```bash
source ~/.zshrc   # or ~/.bashrc
```

## setup

Full automated environment setup -- goes from zero to running services in a single command.

```bash
./ds setup [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--stage <name>` | Stage name (skips prompt) |
| `--skip-deploy` | Skip Pulumi infrastructure deployment |
| `--skip-migrations` | Skip database migrations |
| `--skip-start` | Skip starting backend and frontend |

**Steps performed:**

1. Pre-flight checks (Node.js, pnpm, AWS CLI, Pulumi, git)
2. AWS SSO authentication
3. Fetch shared secrets to `.env`
4. Neon database branch provisioning
5. `pnpm install`
6. Pulumi stack init and config
7. `pulumi up` (deploy infrastructure)
8. Generate SQL and run database migrations
9. Save setup state to `~/.devstride/setup-state.json`
10. Start backend and frontend

If your environment is not yet configured (no `DEVSTRIDE_STAGE` or `AWS_PROFILE`), setup will automatically run `./ds init` first.

::callout{type="info"}
`setup` is idempotent -- it skips steps that are already complete (existing `.env`, existing Pulumi stack, existing DB connection string).
::

## run backend

Start the backend development server.

```bash
./ds run backend
```

This runs the Hono HTTP server locally on **port 3001** using:

```bash
node --import tsx backend/src/local.ts
```

The server starts with `IS_LOCAL=true` and all `DS_*` bindings loaded from your Pulumi stack outputs (cached in `.ds/bind/`). Press `Ctrl+C` to stop.

## run ui

Start the frontend development server.

```bash
./ds run ui
```

This starts the Vite dev server on **port 8080** by running `pnpm dev` in the `frontend/` directory. All `VITE_*` environment variables are injected automatically from your Pulumi stack outputs and `.env` file, including:

- `VITE_API_ROOT_URL` -- your deployed API Gateway URL
- `VITE_PUSHER_APP_KEY` and `VITE_PUSHER_APP_CLUSTER` -- real-time updates
- `VITE_STRIPE_PUBLIC_KEY` -- Stripe integration
- `VITE_MEDIA_ROOT` and `VITE_IMPORTER_ROOT` -- media and importer service URLs

## setup-secrets

Manage environment secrets -- fetch from or push to AWS Secrets Manager.

```bash
./ds setup-secrets [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--pull` | Pull secrets from AWS to `.env` (default) |
| `--push` | Push local `.env` to AWS Secrets Manager |
| `--neon` | Also provision a Neon database branch |

**Pull (default):** Fetches the shared secret bundle from AWS Secrets Manager and writes it to `.env` in the project root. If `.env` already exists, you will be prompted before overwriting.

**Push:** Reads your local `.env`, validates it against required keys, and stores it in AWS Secrets Manager for other developers to pull.

```bash
./ds setup-secrets              # Pull secrets (default)
./ds setup-secrets --push       # Push local .env to AWS
./ds setup-secrets --neon       # Pull secrets and provision Neon branch
```

## outputs

Refresh Pulumi stack outputs to your local environment.

```bash
./ds outputs [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--stage <name>` | Override the stage name (default: `$DEVSTRIDE_STAGE`) |
| `--no-frontend` | Skip writing `frontend/.env.local` |
| `--no-backend` | Skip refreshing backend bind cache |

This command:

1. Fetches `pulumi stack output --json` for your current stage
2. Writes `frontend/.env.local` with derived `VITE_*` variables (API URL, Cognito IDs, media URLs)
3. Refreshes the backend bind cache at `.ds/bind/{stage}-{region}.env`
4. Updates the Pulumi output cache at `.ds/pulumi-{stage}-{region}.json`

Run this after deploying infrastructure to pick up any new or changed resource identifiers. Restart your backend and frontend afterward for the changes to take effect.

## g (generate)

Generate CQRS boilerplate code following DDD conventions.

```bash
./ds g command <name> -m <module>   # Generate a command
./ds g query <name> -m <module>     # Generate a query
```

**Options:**

| Option | Description |
|--------|-------------|
| `-m, --module <module>` | The backend module to generate in (required) |
| `-f, --force` | Force overwrite of existing files |

**Aliases:** `c` for command, `q` for query.

**Examples:**

```bash
./ds g command create-item -m item       # Generate command + service + init
./ds g query get-items -m item           # Generate query + service + init
./ds g command archive-board -m board    # Generate in the board module
```

Each generator creates the command/query class, its service (handler), and the init file wiring, following the project's DDD conventions.

## menu

Show the interactive menu of all available commands, organized by category.

```bash
./ds
# or
./ds menu
```

The menu uses arrow keys for navigation and groups commands into logical sections: setup, development, infrastructure, migrations, data, scripts, Stripe, admin, and code generation.
